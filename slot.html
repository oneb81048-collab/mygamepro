<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>My GamePro - Slots Royale</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&family=Roboto:wght@900&display=swap" rel="stylesheet">
    <style>
        :root {
            --gold: #f1c40f;
            --dark: #0a0f14;
            --glass: rgba(255, 255, 255, 0.1);
            --win: #2ecc71;
        }

        body {
            margin: 0; padding: 0;
            background: radial-gradient(circle at center, #1a2a3a 0%, var(--dark) 100%);
            color: white; font-family: 'Roboto', sans-serif;
            height: 100dvh; display: flex; flex-direction: column; overflow: hidden;
        }

        /* --- HEADER --- */
        .header {
            padding: 15px; text-align: center; background: rgba(0,0,0,0.5);
            border-bottom: 2px solid var(--gold); flex-shrink: 0;
        }
        .title { font-family: 'Orbitron', sans-serif; color: var(--gold); margin: 0; font-size: 1.2rem; }

        /* --- MACHINE AREA --- */
        .slot-container {
            flex-grow: 1; display: flex; flex-direction: column;
            justify-content: center; align-items: center; padding: 10px;
        }

        .machine-frame {
            background: #2c3e50; padding: 15px; border-radius: 20px;
            border: 8px solid #1a252f; box-shadow: 0 0 50px rgba(0,0,0,0.5), inset 0 0 20px rgba(0,0,0,0.5);
            width: 100%; max-width: 400px; position: relative;
        }

        .reels-display {
            display: flex; gap: 10px; background: #000;
            padding: 10px; border-radius: 10px; overflow: hidden;
            height: 120px; border: 4px solid #444;
        }

        .reel {
            flex: 1; background: white; border-radius: 5px;
            display: flex; flex-direction: column; align-items: center;
            font-size: 3rem; position: relative; top: 0;
        }

        /* --- INFOS --- */
        .display-screen {
            background: #000; margin-top: 15px; padding: 10px;
            border-radius: 5px; border: 1px solid var(--gold);
            text-align: center; font-family: 'Orbitron', sans-serif;
        }
        #status-msg { color: var(--gold); font-size: 0.8rem; margin-bottom: 5px; }
        #balance-display { font-size: 1.2rem; color: var(--win); }

        /* --- CONTROLES --- */
        .controls {
            padding: 20px; background: rgba(0,0,0,0.8); flex-shrink: 0;
            display: flex; flex-direction: column; gap: 15px;
            padding-bottom: calc(20px + env(safe-area-inset-bottom));
        }

        .bet-selector {
            display: flex; justify-content: center; gap: 10px;
        }
        .bet-btn {
            background: var(--glass); border: 1px solid white; color: white;
            padding: 8px 15px; border-radius: 5px; cursor: pointer;
        }
        .bet-btn.active { background: var(--gold); color: black; border-color: var(--gold); }

        .spin-btn {
            background: linear-gradient(to bottom, #f1c40f, #d4ac0d);
            border: none; padding: 15px; border-radius: 50px;
            color: #000; font-weight: 900; font-size: 1.5rem;
            cursor: pointer; box-shadow: 0 5px 0 #91770b;
            text-transform: uppercase;
        }
        .spin-btn:active { transform: translateY(3px); box-shadow: 0 2px 0 #91770b; }
        .spin-btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none; box-shadow: none; }

        /* Animation de rotation */
        .rolling { transition: top 0.5s cubic-bezier(.45,.05,.55,.95); }
    </style>
</head>
<body>

<div class="header">
    <h1 class="title">MY GAMEPRO SLOTS</h1>
</div>

<div class="slot-container">
    <div class="machine-frame">
        <div class="reels-display">
            <div class="reel" id="reel1">üçí</div>
            <div class="reel" id="reel2">üîî</div>
            <div class="reel" id="reel3">üíé</div>
        </div>

        <div class="display-screen">
            <div id="status-msg">CHOISISSEZ VOTRE MISE</div>
            <div id="balance-display"><span id="balance">5000</span> FCFA</div>
        </div>
    </div>
</div>

<div class="controls">
    <div class="bet-selector">
        <button class="bet-btn active" onclick="setBet(100, this)">100</button>
        <button class="bet-btn" onclick="setBet(500, this)">500</button>
        <button class="bet-btn" onclick="setBet(1000, this)">1000</button>
    </div>
    <button id="spin-btn" class="spin-btn" onclick="spin()">LANCER</button>
</div>

<script>
    const symbols = ['üçí', 'üçã', 'üçâ', 'üîî', 'üíé', '7Ô∏è‚É£'];
    const weights = [0.3, 0.25, 0.2, 0.15, 0.08, 0.02]; // Probabilit√©s
    
    let balance = 5000;
    let currentBet = 100;
    let isSpinning = false;

    // Audio fictif (clics)
    const playClick = () => { try { new AudioContext().resume(); } catch(e){} };

    function setBet(amount, btn) {
        if (isSpinning) return;
        currentBet = amount;
        document.querySelectorAll('.bet-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        document.getElementById('status-msg').innerText = "MISE : " + amount + " FCFA";
    }

    function getRandomSymbol() {
        const rand = Math.random();
        let cumulative = 0;
        for (let i = 0; i < symbols.length; i++) {
            cumulative += weights[i];
            if (rand < cumulative) return symbols[i];
        }
        return symbols[0];
    }

    async function spin() {
        if (isSpinning || balance < currentBet) {
            if (balance < currentBet) alert("Solde insuffisant !");
            return;
        }

        isSpinning = true;
        balance -= currentBet;
        updateUI();
        
        document.getElementById('spin-btn').disabled = true;
        document.getElementById('status-msg').innerText = "BONNE CHANCE...";
        document.getElementById('status-msg').style.color = "var(--gold)";

        const reels = [document.getElementById('reel1'), document.getElementById('reel2'), document.getElementById('reel3')];
        
        // Effet de rotation visuelle
        const spinResults = [getRandomSymbol(), getRandomSymbol(), getRandomSymbol()];
        
        for (let i = 0; i < 3; i++) {
            await new Promise(resolve => {
                let count = 0;
                const interval = setInterval(() => {
                    reels[i].innerText = symbols[Math.floor(Math.random() * symbols.length)];
                    count++;
                    if (count > 10 + (i * 5)) {
                        clearInterval(interval);
                        reels[i].innerText = spinResults[i];
                        resolve();
                    }
                }, 50);
            });
        }

        checkWin(spinResults);
    }

    function checkWin(results) {
        isSpinning = false;
        document.getElementById('spin-btn').disabled = false;

        const [s1, s2, s3] = results;
        let winMultiplier = 0;

        if (s1 === s2 && s2 === s3) {
            // Jackpot 3 symboles identiques
            if (s1 === '7Ô∏è‚É£') winMultiplier = 50;
            else if (s1 === 'üíé') winMultiplier = 20;
            else winMultiplier = 10;
        } else if (s1 === s2 || s2 === s3 || s1 === s3) {
            // 2 symboles identiques
            winMultiplier = 2;
        }

        if (winMultiplier > 0) {
            const winAmount = currentBet * winMultiplier;
            balance += winAmount;
            document.getElementById('status-msg').innerText = "GAGN√â : +" + winAmount + " FCFA !";
            document.getElementById('status-msg').style.color = "var(--win)";
        } else {
            document.getElementById('status-msg').innerText = "PERDU, ESSAYE ENCORE !";
            document.getElementById('status-msg').style.color = "red";
        }

        updateUI();
    }

    function updateUI() {
        document.getElementById('balance').innerText = balance;
    }
</script>

</body>
</html>
